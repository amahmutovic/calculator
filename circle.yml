dependencies:
  override:
    - mkdir -p build/logs
    - composer install --dev --no-interaction
    - pecl install xdebug
    - ls -la /usr/bin/php
    - ls -la /usr/lib/php
    - ls -la /usr/bin/X11
    - ls -la /usr/share/php
    - ls -la /etc/php.d
    - echo "extension = xdebug.so" >> /etc/php.ini
test:
  pre:
    - mkdir unit_test_reports
  override:
    - phpunit --log-junit unit_test_reports/sonar-report.xml --coverage-clover unit_test_reports/sonar-report-coverage.xml UnitTest
  post:
    - cp -R unit_test_reports/* $CIRCLE_ARTIFACTS